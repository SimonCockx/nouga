\begin{defbox}
Introduce a new type $\<nothing>$ (i.e. the bottom type).

Join of basic types $\join(T_1, T_2)$.
\begin{align*}
\axiomdef{}{\join(T, T) = T}
\\
\axiomdef{}{\join(T_1, T_2) = \join(T_2, T_1)}
\\
\axiomdef{}{\join(\<int>, \<number>) = \<number>}
\\
\ruledef{}{E \in \supertypes(D)}{\join(D, E) = E}
\\
\ruledef{}{E \notin \supertypes(D) \\ \DT(E) = \<type> E \<extends> E': \dots \\ T = \join(D, E')}{\join(D, E) = T}
\\
\axiomdef{}{\join(\<nothing>, T) = T}
\end{align*}

Extension of $\join$ to $n \in \mathbb{N}$ basic types.
\begin{align*}
\axiomdef{}{\join() = \<nothing>}
\\
\axiomdef{}{\join(T) = T}
\\
\ruledef{}{n \geq 3 \\ T' = \join(T_2, \dots, T_n) \\ T = \join(T_1, T')}{\join(T_1, \dots, T_n) = T}
\end{align*}

Join for types $\lv{\join}(T_1\ C_1, T_2\ C_2)$.
\begin{align*}
\ruledef{}{T = \join(T_1, T_2) \\ C = \union(C_1, C_2)}{\lv{\join}(T_1\ C_1, T_2\ C_2) = T\ C}
\end{align*}

Basic subtyping $S <:: T$.
\begin{align*}
\axiomdef{SA-Refl}{T <:: T}
\\
\axiomdef{SA-Num}{\<int> <:: \<number>}
\\
\ruledef{SA-Super!}{E \in \supertypes(D)}{D <:: E}
\\
\axiomdef{SA-Nothing}{\<nothing> <:: T}
\end{align*}

Subtyping $T_1\ C_1 \lv{<::} T_2\ C_2$.
\begin{align*}
\ruledef{SA-Card}{T_1 <:: T_2 \\ \subcardinality(C_1, C_2)}{T_1\ C_1 \lv{<::} T_2\ C_2}
\end{align*}

Typing rules $\Gamma |- e : T\ C$.
\begin{align*}
\ruledef{TA-Or}{\Gamma |- e_1 : \<boolean>\ (1..1) \\ \Gamma |- e_2 : \<boolean>\ (1..1)}{\Gamma |- e_1 \<or> e_2 : \<boolean>\ (1..1)}
\\
\ruledef{TA-And}{\Gamma |- e_1 : \<boolean>\ (1..1) \\ \Gamma |- e_2 : \<boolean>\ (1..1)}{\Gamma |- e_1 \<and> e_2 : \<boolean>\ (1..1)}
\\
\ruledef{TA-Not}{\Gamma |- e : \<boolean>\ (1..1)}{\Gamma |- \<not> e : \<boolean>\ (1..1)}
\\
\ruledef{TA-Exists}{\Gamma |- e : T\ C \\ \subcardinality((0..1), C)}{\Gamma |- e \<exists> : \<boolean>\ (1..1)}
\\
\ruledef{TA-SingleExists}{\Gamma |- e : T\ C \\ \subcardinality((1..1), C) \\ C \neq (1..1)}{\Gamma |- e \<single> \<exists> : \<boolean>\ (1..1)}
\\
\ruledef{TA-MultipleExists}{\Gamma |- e : T\ C \\ \subcardinality((1..2), C)}{\Gamma |- e \<multiple> \<exists> : \<boolean>\ (1..1)}
\\
\ruledef{TA-Contains}{\Gamma |- e_1 : T_1\ C_1 \\ \Gamma |- e_2 : T_2\ C_2 \\ \comparable(T_1, T_2)}{\Gamma |- e_1 \<contains> e_2 : \<boolean>\ (1..1)}
\\
\ruledef{TA-Disjoint}{\Gamma |- e_1 : T_1\ C_1 \\ \Gamma |- e_2 : T_2\ C_2 \\ \comparable(T_1, T_2)}{\Gamma |- e_1 \<disjoint> e_2 : \<boolean>\ (1..1)}
\\
\ruledef{TA-Equals}{\Gamma |- e_1 : T_1\ C_1 \\ \Gamma |- e_2 : T_2\ C_2 \\ \lv{\comparable}(T_1\ C_1, T_2\ C_2)}{\Gamma |- e_1 \<eq> e_2 : \<boolean>\ (1..1)}
\\
\ruledef{TA-NotEquals}{\Gamma |- e_1 : T_1\ C_1 \\ \Gamma |- e_2 : T_2\ C_2 \\ \lv{\comparable}(T_1\ C_1, T_2\ C_2)}{\Gamma |- e_1 \<neq> e_2 : \<boolean>\ (1..1)}
\\
\ruledef{TA-AllEquals}{\Gamma |- e_1 : T_1\ C \\ \Gamma |- e_2 : T_2\ (1..1) \\ \comparable(T_1, T_2)}{\Gamma |- e_1 \<all> \<eq> e_2 : \<boolean>\ (1..1)}
\\
\ruledef{TA-AllNotEquals}{\Gamma |- e_1 : T_1\ C \\ \Gamma |- e_2 : T_2\ (1..1) \\ \comparable(T_1, T_2)}{\Gamma |- e_1 \<all> \<neq> e_2 : \<boolean>\ (1..1)}
\\
\ruledef{TA-AnyEquals}{\Gamma |- e_1 : T_1\ C \\ \Gamma |- e_2 : T_2\ (1..1) \\ \comparable(T_1, T_2)}{\Gamma |- e_1 \<any> \<eq> e_2 : \<boolean>\ (1..1)}
\\
\ruledef{TA-AnyNotEquals}{\Gamma |- e_1 : T_1\ C \\ \Gamma |- e_2 : T_2\ (1..1) \\ \comparable(T_1, T_2)}{\Gamma |- e_1 \<any> \<neq> e_2 : \<boolean>\ (1..1)}
\\
\ruledef{TA-PlusInt}{\Gamma |- e_1 : \<int>\ (1..1) \\ \Gamma |- e_2 : \<int>\ (1..1)}{\Gamma |- e_1 \<+> e_2 : \<int>\ (1..1)}
\\
\ruledef{TA-PlusNumber!}{\Gamma |- e_1 : T_1\ (1..1) \\ \Gamma |- e_2 : T_2\ (1..1) \\ T_1 <:: \<number> \\ T_2 <:: \<number> \\ T_1 \neq \<int> \lor T_2 \neq \<int>}{\Gamma |- e_1 \<+> e_2 : \<number>\ (1..1)}
\\
\ruledef{TA-MultInt}{\Gamma |- e_1 : \<int>\ (1..1) \\ \Gamma |- e_2 : \<int>\ (1..1)}{\Gamma |- e_1 \<*> e_2 : \<int>\ (1..1)}
\\
\ruledef{TA-MultNumber!}{\Gamma |- e_1 : T_1\ (1..1) \\ \Gamma |- e_2 : T_2\ (1..1) \\ T_1 <:: \<number> \\ T_2 <:: \<number> \\ T_1 \neq \<int> \lor T_2 \neq \<int>}{\Gamma |- e_1 \<*> e_2 : \<number>\ (1..1)}
\\
\ruledef{TA-SubtInt}{\Gamma |- e_1 : \<int>\ (1..1) \\ \Gamma |- e_2 : \<int>\ (1..1)}{\Gamma |- e_1 \<-> e_2 : \<int>\ (1..1)}
\\
\ruledef{TA-SubtNumber!}{\Gamma |- e_1 : T_1\ (1..1) \\ \Gamma |- e_2 : T_2\ (1..1) \\ T_1 <:: \<number> \\ T_2 <:: \<number> \\ T_1 \neq \<int> \lor T_2 \neq \<int>}{\Gamma |- e_1 \<-> e_2 : \<number>\ (1..1)}
\\
\ruledef{TA-Division!}{\Gamma |- e_1 : T_1\ (1..1) \\ \Gamma |- e_2 : T_2\ (1..1) \\ T_1 <:: \<number> \\ T_2 <:: \<number>}{\Gamma |- e_1 \</> e_2 : \<number>\ (1..1)}
\\
\ruledef{TA-Count}{\Gamma |- e : T\ C}{\Gamma |- e \<count> : \<int>\ (1..1)}
\\
\ruledef{TA-Project}{\Gamma |- e : D\ (l..u) \\ \attrs(D) = a_1\ T_1\ (l_1..u_1), \dots, a_n\ T_n\ (l_n..u_n)}{\Gamma |- e \<proj> a_k : T_k\ (l*l_k..u*u_k)}
\\
\ruledef{TA-If!}{\Gamma |- e_1 : \<boolean>\ (1..1) \\ \Gamma |- e_2 : T_1\ C_1 \\ \Gamma |- e_3 : T_2\ C_3 \\ T\ C = \lv{\join}(T_1\ C_1, T_2\ C_2)}{\Gamma |- \<if> e_1 \<then> e_2 \<else> e_3 : T\ C}
\\
\ruledef{TA-Func!}{\inp(F) = a_1\ T_1\ C_1, \dots, a_n\ T_n\ C_n \\ \forall i \in 1..n: \Gamma |- e_i : T_i'\ C_i' \\ \forall i \in 1..n: T_i'\ C_i' <:: T_n\ C_n \\ \outp(F) = a\ T\ C}{\Gamma |- F(e_1, \dots, e_n) : T\ C}
\\
\ruledef{TA-Construct!}{\attrs(D) = a_1\ T_1\ C_1, \dots, a_n\ T_n\ C_n \\ \forall i \in 1..n: \Gamma |- e_i : T_i'\ C_i' \\ \forall i \in 1..n: T_i'\ C_i' <:: T_i\ C_i}{\Gamma |- D\set{a_1 = e_1, \dots, a_n = e_n} : D\ (1..1)}
\\
\ruledef{TA-Var}{x : T\ C \in \Gamma}{\Gamma |- x : T\ C}
\\
\axiomdef{TA-True}{\Gamma |- \<True> : \<boolean>\ (1..1)}
\\
\axiomdef{TA-False}{\Gamma |- \<False> : \<boolean>\ (1..1)}
\\
\axiomdef{TA-Number}{\Gamma |- r : \<number>\ (1..1)}
\\
\axiomdef{TA-Int}{\Gamma |- i : \<int>\ (1..1)}
\\
\ruledef{TA-List!}{\forall i \in 1..n: \Gamma |- e_i : T_i\ (l_i..u_i) \\ T = \join(T_1, \dots, T_n)}{\Gamma |- [e_1, \dots, e_n] : T\ (\sum\nolimits_{i \in 1..n} l_i \;.. \sum\nolimits_{i \in 1..n} u_i)}
\\
\ruledef{TA-OnlyExists}{\Gamma |- e : D\ (1..1) \\ \attrs(D) = a_1\ T_1\ C_1, \dots, a_n\ T_n\ C_n}{\Gamma |- e \<proj> a_k \<only> \<exists> : \<boolean>\ (1..1)}
\\
\ruledef{TA-OnlyElement}{\Gamma |- e : T\ C}{\Gamma |- e \<only-element> : T\ (0..1)}
\end{align*}

Typing function declarations $F \OK$.
\begin{align*}
\ruledef{!}{\inp(F) = a_1\ T_1\ C_1, \dots, a_n\ T_n\ C_n \\ \outp(F) = a\ T\ C \\ a_1 : T_1\ C_1, \dots, a_n : T_n\ C_n |- \op(F) : T'\ C' \\ T'\ C' <:: T\ C}{F \OK}
\end{align*}
\end{defbox}
